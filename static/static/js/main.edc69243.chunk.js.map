{"version":3,"sources":["action/todo.js","action/index.js","reducer/todos.js","reducer/index.js","component/header/Header.js","component/todolist/Todo.js","component/todolist/TodoList.js","component/footer/Footer.js","component/chat/ChatMessage.js","component/chat/Input.js","component/chat/Chat.js","component/App.js","index.js","store/index.js"],"names":["ADD_TODO","COMPLETE_TODO","addTodo","text","type","addTodo2","dispatch","fetch","then","res","json","data","status","complete","id","complete2","data2","todo","state","action","Math","floor","random","completed","todos","undefined","map","t","combineReducers","Header","input","onClick","this","props","ref","node","value","Component","Todo","connect","txt","className","TodoList","ChatMessage","key","includes","result","split","line","push","time","message_type","isMine","align","i","length","renderMessage","src","img","renderProfile","name","renderMessageGroup","defaultProps","Input","inputName","inputText","eventSend","onClickSend","bind","console","log","$","on","event","code","shiftKey","preventDefault","onClickJoin","msg","socket","io","testData","Chat","getCurrentTime","now","Date","year","getFullYear","toString","padStart","month","getMonth","date","getDate","hour","getHours","min","getMinutes","emit","userid","room","addMessage","from","convert","join","convertData","idx","setState","forEach","JSON","stringify","renderText","joinChannel","sendMessage","App","store","reducer","initialState","enhancer","compose","applyMiddleware","thunk","window","devToolsExtension","f","createStore","configureStore","render","ReactDOM","document","getElementById","subscribe"],"mappings":"0hBACMA,EAAW,qBACXC,EAAgB,0BAGtB,SAASC,EAAQC,GACf,MAAO,CAAEC,KAAOJ,EAAUG,QAG5B,SAASE,EAASF,GAChB,OAAO,SAACG,GACN,OAAOC,MAAM,gBAAgBC,MAC3B,SAAAC,GAAG,OAAIA,EAAIC,OAAOF,MAAK,SAAAG,GAAI,OAAIL,EAASJ,EAAQS,EAAKC,gBAK3D,SAASC,EAAT,GAAmC,IAAhBA,EAAe,EAAfA,SAAUC,EAAK,EAALA,GAC3B,MAAO,CAAEV,KAAMH,EAAeY,WAAUC,MAG1C,SAASC,EAAUC,GACjB,OAAO,SAACV,GACN,OAAOC,MAAM,gBAAgBC,MAC3B,SAAAC,GAAG,OAAIA,EAAIC,OAAOF,MAAK,SAAAG,GAAI,OAAIL,EAASO,EAASG,WCrBxC,ICDRhB,EDELiB,ECFKjB,SAAUC,EDEfgB,ECFehB,cAEXgB,EAAO,SAACC,EAAOC,GACnB,OAAQA,EAAOf,MACb,KAAKJ,EACH,MAAO,CACLc,GAAIM,KAAKC,MAAsB,IAAhBD,KAAKE,UAAkB,EACtCL,KAAME,EAAOhB,KACboB,WAAW,GAGf,KAAKtB,EACH,OAAIiB,EAAMJ,KAAOK,EAAOL,GACfI,EAGF,2BACFA,GADL,IAEEL,UAAWK,EAAML,WAGrB,QACE,OAAOK,IAiBEM,EAbD,WAAyB,IAAxBN,EAAuB,uDAAf,GAAIC,EAAW,uCACpC,OAAQA,EAAOf,MACb,KAAKJ,EACH,MAAM,GAAN,mBACKkB,GADL,CACYD,OAAKQ,EAAWN,KAE9B,KAAKlB,EACH,OAAOiB,EAAMQ,KAAI,SAAAC,GAAC,OAAIV,EAAKU,EAAGR,MAChC,QACE,OAAOD,ICjCEU,cAAgB,CAC7BJ,U,4BCDIK,G,6KAGF,IAAIC,EACGC,EAAWC,KAAKC,MAAhBF,QAEP,OACE,gCACI,uBAAOG,IAAK,SAAAC,GACVL,EAAQK,KAGV,wBAAQJ,QAAS,WACfA,EAAQD,EAAMM,OACdN,EAAMM,MAAQ,IAFhB,wB,GAZWC,cCaNC,GDgBAC,iBAAQd,GARO,SAACnB,GAC3B,MAAO,CACHyB,QADG,SACKS,GACNlC,EAASD,SAKJkC,CAA0CV,G,uKC9B3C,IAAD,EACiCG,KAAKC,MAApCnB,EADF,EACEA,GAAIG,EADN,EACMA,KAAMJ,EADZ,EACYA,SAAUkB,EADtB,EACsBA,QAC3B,OACI,oBAAIjB,GAAIA,EACJiB,QAAS,kBAAMA,EAAQ,CACnBjB,GAAKA,EACLD,UAAYA,KAEhB4B,UAAa5B,EAAW,YAAc,GAL1C,SAMEI,Q,GAVKoB,cCGbK,E,uKAEM,IAAD,EACiBV,KAAKC,MAAvBT,EADC,EACDA,MAAOO,EADN,EACMA,QACb,OACE,6BACCP,EAAME,KAAI,SAAAT,GAAI,OACd,cAAC,EAAD,aAECc,QAASA,GACLd,GAFCA,EAAKH,a,GARKuB,a,GAiCRE,aAdc,SAACrB,GAC5B,MAAO,CACLM,MAAON,EAAMM,UAIe,SAAClB,GAC7B,MAAO,CACHyB,QADG,SACKpB,GAENL,EAASO,EAASF,QAIb4B,CAAsDG,GCpChDL,Y,OCCfM,E,kDACJ,WAAYV,GAAQ,uCACZA,G,0DAGMtB,GAEZ,IAAIiC,EAAM,EACV,GAAIjC,EAAKkC,SAAS,MAAO,CACvB,IAAIC,EAAS,GAIb,OAHAnC,EAAKoC,MAAM,MAAMrB,KAAK,SAAAsB,GACpBF,EAAOG,KAAK,iCAAmBD,EAAK,yBAAbJ,SAEjB,sBAAkBH,UAAU,UAA5B,SAAuCK,GAA5BF,KAGnB,OAAQ,sBAAkBH,UAAU,UAA5B,SAAuC9B,GAA5BiC,O,yCAIJjC,GAMjB,IALA,IAAMuC,EAAOlB,KAAKC,MAAMiB,KAAKH,MAAM,KAAK,GAClCI,EAAenB,KAAKC,MAAMmB,OAAS,UAAY,YAC/CC,EAAQrB,KAAKC,MAAMmB,OAAS,QAAU,OACxCN,EAAS,GAELQ,EAAI,EAAIA,EAAI3C,EAAK4C,SAAUD,EACjCR,EAAOG,KAAa,uBAChBK,IAAM3C,EAAK4C,OAAS,GAAKvB,KAAKC,MAAMmB,QACtCN,EAAOG,KAAK,qBAAqBR,UAAU,iBAA/B,SAAiDS,GAAxC,cAEvBJ,EAAOG,KACL,qBAAaR,UAAW,WAAaU,GAAgBG,EAAI,EAAI,SAAW,IAAxE,SACE,qBAAKb,UAAW,gBAAkBY,EAAlC,SACGrB,KAAKwB,cAAc7C,EAAK2C,OAFnBA,IAWd,OAHKtB,KAAKC,MAAMmB,QACdN,EAAOG,KAAK,qBAAqBR,UAAU,iBAA/B,SAAiDS,GAAxC,cAEhBJ,I,sCAIP,OACE,qBAAKL,UAAU,WAAf,SACE,qBAAKgB,IAAKzB,KAAKC,MAAMyB,U,+BAMzB,IAAML,EAAQrB,KAAKC,MAAMmB,OAAS,QAAU,OAE5C,OACE,sBAAKtC,GAAI,kBAAT,UACE,qBAAK2B,UAAW,SAAWY,EAA3B,SAEE,sBAAKZ,UAAW,QAAUY,EAA1B,UACGrB,KAAKC,MAAMmB,OAAS,KAAOpB,KAAK2B,gBAEjC,sBAAKlB,UAAW,gBAAkBY,EAAlC,UACE,qBAAKZ,UAAW,OAAhB,SAA0BT,KAAKC,MAAMmB,OAA2B,GAAlBpB,KAAKC,MAAM2B,OACtD5B,KAAK6B,mBAAmB7B,KAAKC,MAAM9B,cAI5C,4C,GAtEkBkC,aAkF1BM,EAAYmB,aAAe,CACzBV,QAAQ,EACRjD,KAAM,CAAC,IACPyD,KAAM,qBACNV,KAAM,qBACNQ,IAAK,uMAEQf,Q,+BCLAoB,E,kDAlFb,WAAY9B,GAAO,IAAD,8BAChB,cAAMA,IAED+B,UAAY,KACjB,EAAKC,UAAY,KACjB,EAAK/C,MAAQ,GALG,E,gEAWhB,IAAIgD,EAAYlC,KAAKmC,YAAYC,KAAKpC,MACtCqC,QAAQC,IAAI,YACZC,IAAE,qBAAqBC,GAAG,YAAY,SAASC,GAC1B,UAAfA,EAAMC,MAAmC,gBAAfD,EAAMC,MAC7BD,EAAME,WACTF,EAAMG,iBACNV,U,oCAON,GAAKlC,KAAKgC,UAAU5B,MAGf,CACH,IAAIzB,EAAO,CACTyC,QAAQ,EACRjD,KAAM6B,KAAKiC,UAAU7B,MACrBwB,KAAM5B,KAAKgC,UAAU5B,MACrBsB,IAAK,sMACLR,KAAM,oBAERlB,KAAKC,MAAM4C,YAAYlE,W,oCAKzB,IAAImE,EAAM9C,KAAKiC,UAAU7B,MASlB,GARPiC,QAAQC,IAAItC,KAAKiC,WAGjBjC,KAAKiC,UAAU7B,MAAQ,GAKX0C,EAGP,CACH,IAAInE,EAAO,CACTyC,QAAQ,EACRjD,KAAM2E,EACNlB,KAAM5B,KAAKgC,UAAU5B,MACrBsB,IAAK,sMACLR,KAAM,oBAERlB,KAAKC,MAAMkC,YAAYxD,W,+BAIlB,IAAD,OAEN,OACE,sBAAKG,GAAK,gBAAV,UACE,wBAAO2B,UAAU,SAAjB,0BAEE,uBAAOP,IAAK,SAAAC,GAAU,EAAK6B,UAAY7B,QAEzC,wBAAQM,UAAU,SAASV,QAAS,WAAO,EAAK8C,eAAhD,0BACA,sBAAKpC,UAAU,aAAf,UACE,0BAAU3B,GAAG,mBAAmBoB,IAAK,SAAAC,GAAU,EAAK8B,UAAY9B,KAChE,wBAAQJ,QAAS,WAAO,EAAKoC,eAA7B,oC,GA5EU9B,a,QCGd0C,E,OAASC,EAAGzC,QADN,SAEN0C,EAAW,GAyJFC,E,kDAtJb,WAAYjD,GAAO,IAAD,uBAChB,cAAMA,IAEDf,MAAQ,CACXP,KAAM,IAJQ,OAgBhB,EAAKwE,eATgB,WACnB,IAAIC,EAAM,IAAIC,KACVC,EAAOF,EAAIG,cAAcC,WAAWC,SAAS,EAAG,KAChDC,EAAQN,EAAIO,WAAWH,WAAWC,SAAS,EAAG,KAC9CG,EAAOR,EAAIS,UAAUL,WAAWC,SAAS,EAAG,KAC5CK,EAAOV,EAAIW,WAAWP,WAAWC,SAAS,EAAG,KAC7CO,EAAMZ,EAAIa,aAAaT,WAAWC,SAAS,EAAG,KAClD,MAAM,GAAN,OAAUH,EAAV,YAAkBI,EAAlB,YAA2BE,EAA3B,YAAmCE,EAAnC,YAA2CE,IAER5B,KAAf,gBAhBN,E,wDAmBNzD,GACVoE,EAAOmB,KAAK,QAAS,CACnBtC,KAAM,eACNuC,OAAQ,mBACRC,KAAM,a,6BAKD,IAAD,OACFC,EAAarE,KAAKqE,WAAWjC,KAAKpC,MACtC+C,EAAOmB,KAAK,aAAc,IAAI,SAAAvF,GACR,aAAhBA,EAAKmC,SACLuB,QAAQC,IAAI3D,EAAKA,MACjBoE,EAAOmB,KAAK,QAAS,CACnBtC,KAAM,eACNuC,OAAQ,mBACRC,KAAM,WAORrB,EAAOP,GAAG,QAAQ,SAAA7D,GAChB0F,EAAW,CACTjD,QAAQ,EACRQ,KAAMjD,EAAK2F,KAAK1C,KAChBF,IAAK,gBACLvD,KAAMQ,EAAKmE,IACX5B,KAAM,EAAKiC,sBAIfJ,EAAOP,GAAG,aAAa,SAAA7D,GACrB0D,QAAQC,IAAI3D,EAAO,qE,0CAO3BqB,KAAKuE,UAELvE,KAAKwE,S,iCASI7F,GACTA,EAAKuC,KAAOlB,KAAKmD,iBACjB,IAAIsB,EAAc,GAEdC,GADJD,EAAczE,KAAKd,MAAMP,MACH4C,OAAS,EAE3BmD,GAAO,GAAKD,EAAYC,GAAK9C,OAASjD,EAAKiD,MAAQ6C,EAAYC,GAAKxD,OAASvC,EAAKuC,KACpFuD,EAAYC,GAAKvG,KAAK8C,KAAKtC,EAAKR,OAGhCsG,EAAYxD,KAAKtC,GACjB8F,IAAcC,GAAKvG,KAAO,CAACQ,EAAKR,OAElC6B,KAAK2E,SAAS,CACZhG,KAAM8F,M,kCAIE9F,GACVsE,EAAShC,KAAKtC,GAEdoE,EAAOmB,KAAK,OAAQ,CAACpB,IAAKnE,EAAKR,OAAO,SAACQ,GACrC0D,QAAQC,IAAI3D,MAGdqB,KAAKqE,WAAW1F,K,gCAIhB,IAAI8F,EAAc,GACdC,GAAO,EACXzB,EAAS2B,SAAQ,SAAAjG,GACX+F,GAAO,GAAKD,EAAYC,GAAK9C,OAASjD,EAAKiD,MAAQ6C,EAAYC,GAAKxD,OAASvC,EAAKuC,KACpFuD,EAAYC,GAAKvG,KAAK8C,KAAKtC,EAAKR,OAGhCsG,EAAYxD,KAAKtC,GACjB8F,IAAcC,GAAKvG,KAAO,CAACQ,EAAKR,UAGhC0G,KAAKC,UAAU9E,KAAKd,MAAMP,QAAUkG,KAAKC,UAAUL,IACrDzE,KAAK2E,SAAS,CACZhG,KAAM8F,M,mCAOV,IAAI7D,EAAM,EACNE,EAAS,GAWb,OAVAd,KAAKd,MAAMP,KAAKiG,SAAQ,SAAAjG,GACtBmC,EAAOG,KAAK,cAAC,EAAD,CAEVG,OAAQzC,EAAKyC,OACbjD,KAAMQ,EAAKR,KACXyD,KAAMjD,EAAKiD,KACXF,IAAK/C,EAAK+C,IACVR,KAAMvC,EAAKuC,MALNN,SAQDE,I,+BAGD,IAAD,OACN,OACE,sBAAKhC,GAAG,UAAR,UACE,qBAAKA,GAAG,eAAR,SACGkB,KAAK+E,eAER,cAAC,EAAD,CACElC,YAAc,SAAClE,GAAU,EAAKqG,YAAYrG,IAC1CwD,YAAc,SAACxD,GAAQ,EAAKsG,YAAYtG,a,GAjJ/B0B,aCaJ6E,E,uKAdX,OAAQ,8BACN,cAAC,EAAD,U,GAHY7E,aCCZ8E,G,MCJS,SAAwBC,GAA6B,IAApBC,EAAmB,uDAAJ,GACxDC,EAAWC,YAChBC,YAAgBC,KAChBC,OAAOC,kBAAoBD,OAAOC,oBAAsB,SAAAC,GAAC,OAAIA,IAE9D,OAAOC,YAAYT,EAASC,EAAcC,GDD7BQ,CAAeV,EAAQ,CACpC,MAAU,MAOLW,EAAS,WACbC,IAASD,OACR,cAAC,IAAD,CAAUZ,MAAOA,EAAjB,SACE,cAAC,EAAD,MAEDc,SAASC,eAAe,UAI5Bf,EAAMgB,UAAUJ,GAChBA,M","file":"static/js/main.edc69243.chunk.js","sourcesContent":["// action type\r\nconst ADD_TODO = '@@example/ADD_TODO';\r\nconst COMPLETE_TODO = '@@example/COMPLETE_TODO';\r\n\r\n// action creators\r\nfunction addTodo(text) {\r\n  return { type : ADD_TODO, text };\r\n}\r\n\r\nfunction addTodo2(text) {\r\n  return (dispatch) => {\r\n    return fetch('api/add.json').then(\r\n      res => res.json().then(data => dispatch(addTodo(data.status)))\r\n    );\r\n  };\r\n}\r\n\r\nfunction complete({complete, id}) {\r\n  return { type: COMPLETE_TODO, complete, id };\r\n}\r\n\r\nfunction complete2(data2) {\r\n  return (dispatch) => {\r\n    return fetch('api/add.json').then(\r\n      res => res.json().then(data => dispatch(complete(data2)))\r\n    );\r\n  };\r\n}\r\n\r\nexport {\r\n  ADD_TODO,\r\n  COMPLETE_TODO,\r\n\r\n  addTodo,\r\n  addTodo2,\r\n\r\n  complete,\r\n  complete2\r\n}","import * as todo from './todo';\r\n\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default {\r\n  todo\r\n}","import todoAction from 'action/index';\r\n\r\nconst {ADD_TODO, COMPLETE_TODO} = todoAction.todo;\r\n\r\nconst todo = (state, action) => {\r\n  switch (action.type) {\r\n    case ADD_TODO:\r\n      return {\r\n        id: Math.floor(Math.random() * 100) + 1,\r\n        todo: action.text,\r\n        completed: false\r\n      };\r\n\r\n    case COMPLETE_TODO:\r\n      if (state.id !== action.id) {\r\n        return state;\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        complete: !state.complete\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst todos = (state = [], action) => {\r\n  switch (action.type) {\r\n    case ADD_TODO:\r\n      return [\r\n        ...state, todo(undefined, action)\r\n      ];\r\n    case COMPLETE_TODO:\r\n      return state.map(t => todo(t, action));\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default todos;","// reducer/index.js\r\nimport todos from \"./todos\";\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport default combineReducers({\r\n  todos\r\n});","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addTodo2 } from 'action/todo';\r\n\r\nclass Header extends Component {\r\n\r\n  render() {\r\n    let input;\r\n    const {onClick} = this.props;\r\n\r\n    return (\r\n      <div>\r\n          <input ref={node => {\r\n            input = node;\r\n          }}/>\r\n\r\n          <button onClick={() =>{\r\n            onClick(input.value);\r\n            input.value = \"\";\r\n          }}>Add</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst headerDispatchToProps = (dispatch) => {\r\n    return {\r\n        onClick(txt){\r\n          dispatch(addTodo2(txt))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(undefined, headerDispatchToProps)(Header);","import React, { Component } from 'react';\r\n\r\nclass Todo extends Component {\r\n    render() {\r\n        const {id, todo, complete, onClick} = this.props;\r\n        return (\r\n            <li id={id} \r\n                onClick={() => onClick({\r\n                    id : id, \r\n                    complete : !complete\r\n                })}\r\n                className={!!complete ? 'completed' : ''}\r\n            >{todo}</li>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Todo;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { complete, complete2 } from 'action/todo';\r\nimport Todo from './Todo';\r\n\r\nclass TodoList extends Component {\r\n  \r\n  render() {\r\n  \tconst {todos, onClick} = this.props;\r\n    return (\r\n      <ul>\r\n    \t\t{todos.map(todo =>\r\n    \t\t\t<Todo \r\n    \t\t\t\tkey={todo.id}\r\n    \t\t\t\tonClick={onClick}\r\n    \t\t\t\t{...todo}\r\n    \t\t\t/>\r\n    \t\t)}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst todolistStateToProps = (state) => {\r\n  return {\r\n    todos: state.todos\r\n  }\r\n}\r\n\r\nconst todolistDispatchToProps = (dispatch) => {\r\n    return {\r\n        onClick(data){\r\n          // dispatch(complete2(data))\r\n          dispatch(complete(data))\r\n        }\r\n    }\r\n}\r\nexport default connect(todolistStateToProps,todolistDispatchToProps)(TodoList);","import React, { Component } from 'react';\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n    \t<div>\r\n\t        <a href=\"#\">1</a>\r\n\t        <a href=\"#\">2</a>\r\n\t        <a href=\"#\">3</a>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ChatMessage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  renderMessage(data)\r\n  {\r\n    var key = 0;\r\n    if (data.includes('\\n')) {\r\n      var result = [];\r\n      data.split('\\n').map( line => {\r\n        result.push(<span key={key++}>{line}<br/></span>);\r\n      });\r\n      return (<span key={key++} className='message'>{result}</span>);\r\n    }\r\n    else {\r\n      return (<span key={key++} className='message'>{data}</span>);\r\n    }\r\n  }\r\n\r\n  renderMessageGroup(data) {\r\n    const time = this.props.time.split(' ')[1];\r\n    const message_type = this.props.isMine ? 'my-chat' : 'your-chat';\r\n    const align = this.props.isMine ? 'right' : 'left'; \r\n    var result = [];\r\n\r\n    for(var i = 0 ; i < data.length; ++i) {\r\n      result.push(i > 0 ? <p></p> : <p/>);\r\n      if (i === data.length - 1 && this.props.isMine) {\r\n        result.push(<div key='timestamp' className='cell timestamp'>{time}</div>);\r\n      }\r\n      result.push(\r\n        <div key={i} className={'balloon ' + message_type + (i > 0 ? ' child' : '')}>\r\n          <div className={'text-message ' + align}> \r\n            {this.renderMessage(data[i])} \r\n          </div>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    if (!this.props.isMine) {\r\n      result.push(<div key='timestamp' className='cell timestamp'>{time}</div>);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  renderProfile() {\r\n    return(\r\n      <div className='cell pic'>\r\n        <img src={this.props.img} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render(){\r\n    const align = this.props.isMine ? 'right' : 'left'; \r\n\r\n    return (\r\n      <div id={'dv-chat-message'}>\r\n        <div className={'float-' + align}> \r\n          \r\n          <div className={'desc ' + align}>\r\n            {this.props.isMine ? null : this.renderProfile()}\r\n\r\n            <div className={'cell message-' + align}>\r\n              <div className={'name'}>{!this.props.isMine ? this.props.name : ''}</div>\r\n                {this.renderMessageGroup(this.props.text)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p>&nbsp;</p>\r\n      </div>);\r\n  }\r\n}\r\n\r\nChatMessage.propTypes = {\r\n  isMine: PropTypes.bool,\r\n  text: PropTypes.array,\r\n  name: PropTypes.string,\r\n  time: PropTypes.string,\r\n  img: PropTypes.string\r\n};\r\nChatMessage.defaultProps = {\r\n  isMine: false,\r\n  text: [''],\r\n  name: '작성자',\r\n  time: '오전 00:00',\r\n  img: 'https://lh3.googleusercontent.com/proxy/A-2dhRZZaeZ0IWMPOlybAu7tR5UAtOaX3EpcWHJ5iMxQAmSwFWM6JOieS-om-Xr2zDK2soGyseTVRoKdAm8Y4g7bHS1GWo-7j9btj2yB5TCPNuBfzpnU_PEKcen09-Nhnn3XuC6EQqikgPbYtqUxlaAq0Uc'\r\n};\r\nexport default ChatMessage;","import React, { Component } from 'react';\r\nimport \"./Input.css\";\r\nimport $ from 'jquery';\r\n\r\nclass Input extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.inputName = null;\r\n    this.inputText = null;\r\n    this.state = {\r\n    }\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n    var eventSend = this.onClickSend.bind(this);\r\n    console.log('didmount');\r\n    $('#textarea-message').on('keypress', function(event) {\r\n      if (event.code === 'Enter' || event.code === 'NumpadEnter'){\r\n        if (!event.shiftKey) {\r\n          event.preventDefault();\r\n          eventSend();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onClickJoin() {\r\n    if (!this.inputName.value) {\r\n\r\n    }\r\n    else {\r\n      var data = {\r\n        isMine: true,\r\n        text: this.inputText.value,\r\n        name: this.inputName.value,\r\n        img: 'https://lh3.googleusercontent.com/proxy/A-2dhRZZaeZ0IWMPOlybAu7tR5UAtOaX3EpcWHJ5iMxQAmSwFWM6JOieS-om-Xr2zDK2soGyseTVRoKdAm8Y4g7bHS1GWo-7j9btj2yB5TCPNuBfzpnU_PEKcen09-Nhnn3XuC6EQqikgPbYtqUxlaAq0Uc',\r\n        time: '2020-12-21 12:28'\r\n      };\r\n      this.props.onClickJoin(data);\r\n    }\r\n  }\r\n\r\n  onClickSend() {\r\n    var msg = this.inputText.value;\r\n    console.log(this.inputText);\r\n    //console.log(this.inputName.value);\r\n    //console.log(this.inputText.value);\r\n    this.inputText.value = '';\r\n\r\n    /*if (!this.inputName.value) {\r\n\r\n    }\r\n    else */if (!msg) {\r\n\r\n    }\r\n    else {\r\n      var data = {\r\n        isMine: true,\r\n        text: msg,\r\n        name: this.inputName.value,\r\n        img: 'https://lh3.googleusercontent.com/proxy/A-2dhRZZaeZ0IWMPOlybAu7tR5UAtOaX3EpcWHJ5iMxQAmSwFWM6JOieS-om-Xr2zDK2soGyseTVRoKdAm8Y4g7bHS1GWo-7j9btj2yB5TCPNuBfzpnU_PEKcen09-Nhnn3XuC6EQqikgPbYtqUxlaAq0Uc',\r\n        time: '2020-12-21 12:28'\r\n      };\r\n      this.props.onClickSend(data);\r\n    }\r\n  }\r\n\r\n  render(){\r\n    \r\n    return (\r\n      <div id = 'dv-chat-input'>\r\n        <label className='hidden'>\r\n          이름:\r\n          <input ref={node => { this.inputName = node; }}/>\r\n        </label>\r\n        <button className='hidden' onClick={() =>{ this.onClickJoin(); }}>입장</button>\r\n        <div className='input-text'>\r\n          <textarea id='textarea-message' ref={node => { this.inputText = node; }}/>\r\n          <button onClick={() =>{ this.onClickSend(); }}>전송</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Input;","import React, { Component } from 'react';\r\nimport ChatMessage from './ChatMessage';\r\nimport './Chat.css';\r\nimport Input from \"./Input\";\r\nimport io from 'socket.io-client';\r\n\r\nconst uri = '/chat';\r\nconst socket = io.connect(uri);\r\nconst testData = [];\r\n\r\nclass Chat extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n    }\r\n\r\n    var getCurrentTime = () => {\r\n      var now = new Date();\r\n      var year = now.getFullYear().toString().padStart(4, '0');\r\n      var month = now.getMonth().toString().padStart(2, '0');\r\n      var date = now.getDate().toString().padStart(2, '0');\r\n      var hour = now.getHours().toString().padStart(2, '0');\r\n      var min = now.getMinutes().toString().padStart(2, '0');\r\n      return `${year}-${month}-${date} ${hour}:${min}`;\r\n    }\r\n    this.getCurrentTime = getCurrentTime.bind(this);\r\n  }\r\n\r\n  joinChannel(data) {     \r\n    socket.emit('login', {\r\n      name: '상호',\r\n      userid: 'sangho@gmail.com',\r\n      room: 'public'\r\n    })\r\n    //this.join(data);\r\n  }\r\n\r\n  join () {\r\n    var addMessage = this.addMessage.bind(this);\r\n    socket.emit('login_user', {}, data => {\r\n      if (data.result === 'complete') {\r\n          console.log(data.data);\r\n          socket.emit('login', {\r\n            name: '상호',\r\n            userid: 'sangho@gmail.com',\r\n            room: 'public'\r\n          })\r\n          // from:\r\n          // name: \"yok\"\r\n          // userid: \"ungmo2@gmail.com\"\r\n          // __proto__: Object\r\n          // msg: \"안녕하세요\"\r\n          socket.on(\"chat\", data => {\r\n            addMessage({\r\n              isMine: false,\r\n              name: data.from.name,\r\n              img: './unnamed.jpg',\r\n              text: data.msg,\r\n              time: this.getCurrentTime()\r\n            })\r\n          });\r\n\r\n          socket.on('leaveRoom', data => {\r\n            console.log(data + '님이 방을 떠났습니다');\r\n          })\r\n      } \r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.convert();\r\n\r\n    this.join();\r\n    // console.log('try login');\r\n    // socket.emit('login', {\r\n    //   name: '상호',\r\n    //   userid: 'sangho@gmail.com',\r\n    //   room: 'public'\r\n    // })\r\n  }\r\n\r\n  addMessage(data) {\r\n    data.time = this.getCurrentTime()\r\n    var convertData = [];\r\n    convertData = this.state.data;\r\n    var idx = convertData.length - 1;\r\n\r\n    if (idx >= 0 && convertData[idx].name === data.name && convertData[idx].time === data.time) {\r\n      convertData[idx].text.push(data.text);\r\n    }\r\n    else {\r\n      convertData.push(data);\r\n      convertData[++idx].text = [data.text];\r\n    }\r\n    this.setState({\r\n      data: convertData\r\n    });\r\n  }\r\n\r\n  sendMessage(data){\r\n    testData.push(data);\r\n    \r\n    socket.emit('chat', {msg: data.text}, (data) => {\r\n      console.log(data);\r\n    })\r\n\r\n    this.addMessage(data);\r\n  }\r\n\r\n  convert(){\r\n    var convertData = [];\r\n    var idx = -1;\r\n    testData.forEach(data => {\r\n      if (idx >= 0 && convertData[idx].name === data.name && convertData[idx].time === data.time) {\r\n        convertData[idx].text.push(data.text);\r\n      }\r\n      else {\r\n        convertData.push(data);\r\n        convertData[++idx].text = [data.text];\r\n      }\r\n    });\r\n    if (JSON.stringify(this.state.data) !== JSON.stringify(convertData)) {\r\n      this.setState({\r\n        data: convertData,\r\n      });\r\n    }\r\n  }\r\n\r\n  renderText()\r\n  {\r\n    var key = 0;\r\n    var result = [];\r\n    this.state.data.forEach(data => {\r\n      result.push(<ChatMessage\r\n        key={key++}\r\n        isMine={data.isMine}\r\n        text={data.text}\r\n        name={data.name}\r\n        img={data.img}\r\n        time={data.time}\r\n      />)\r\n    });\r\n    return (result);\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div id='dv-chat'>\r\n        <div id='dv-chat-body'>\r\n          {this.renderText()}\r\n        </div>\r\n        <Input\r\n          onClickJoin={ (data) => {this.joinChannel(data)} }\r\n          onClickSend={ (data)=>{this.sendMessage(data)} } \r\n        />\r\n      </div>);\r\n  }\r\n}\r\n\r\nexport default Chat;","import React, { Component } from 'react';\r\nimport \"./App.css\";\r\nimport Header from './header/Header';\r\nimport TodoList from './todolist/TodoList';\r\nimport Footer from './footer/Footer';\r\nimport Chat from 'component/chat/Chat';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (<div>\r\n      <Chat/>\r\n    </div>)\r\n    return (\r\n        <div>\r\n          <Header/>\r\n          <TodoList/>\r\n          <Footer/>\r\n          <Chat/>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport configureStore from './store/index';\nimport { Provider } from 'react-redux';\nimport ReactDOM from 'react-dom';\nimport reducer from './reducer/index';\nimport App from './component/App'\nimport './index.css';\n\nconst store = configureStore(reducer,{\n\t\"todos\" : [\n\t\t/*{\"id\":1, \"todo\":\"빨래하기\", \"complete\":false},\n\t\t{\"id\":2, \"todo\":\"청소하기\", \"complete\":false},\n\t\t{\"id\":3, \"todo\":\"공부하기\", \"complete\":false}*/\n\t]\n});\n\nconst render = () => {\n  ReactDOM.render(\n  \t<Provider store={store}>\n\t    <App/>\n    </Provider>,\n    document.getElementById('root')\n  )\n};\n\nstore.subscribe(render);\nrender();","// store/index.js\r\nimport { createStore, compose, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nexport default function configureStore(reducer, initialState = {}) {\r\n\tconst enhancer = compose(\r\n\t\tapplyMiddleware(thunk),\r\n\t\twindow.devToolsExtension ? window.devToolsExtension() : f => f\r\n\t);\r\n\treturn createStore(reducer, initialState, enhancer);\r\n}"],"sourceRoot":""}