(this["webpackJsonpd-mgr"]=this["webpackJsonpd-mgr"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"ADD_TODO",(function(){return p})),n.d(i,"COMPLETE_TODO",(function(){return j})),n.d(i,"addTodo",(function(){return m})),n.d(i,"addTodo2",(function(){return b})),n.d(i,"complete",(function(){return f})),n.d(i,"complete2",(function(){return O}));var c=n(1),s=n(0),r=n(10),o=n(47);var a=n(13),u=n(20),l=n.n(u),d=n(50),h=n(15),p="@@example/ADD_TODO",j="@@example/COMPLETE_TODO";function m(e){return{type:p,text:e}}function b(e){return function(e){return fetch("api/add.json").then((function(t){return t.json().then((function(t){return e(m(t.status))}))}))}}function f(e){var t=e.complete,n=e.id;return{type:j,complete:t,id:n}}function O(e){return function(t){return fetch("api/add.json").then((function(n){return n.json().then((function(n){return t(f(e))}))}))}}var v=i.ADD_TODO,x=i.COMPLETE_TODO,g=function(e,t){switch(t.type){case v:return{id:Math.floor(100*Math.random())+1,todo:t.text,completed:!1};case x:return e.id!==t.id?e:Object(h.a)(Object(h.a)({},e),{},{complete:!e.complete});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return[].concat(Object(d.a)(e),[g(void 0,t)]);case x:return e.map((function(e){return g(e,t)}));default:return e}},k=Object(r.c)({todos:y}),C=n(2),M=n(3),N=n(5),T=n(4),A=function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e,t=this.props.onClick;return Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{ref:function(t){e=t}}),Object(c.jsx)("button",{onClick:function(){t(e.value),e.value=""},children:"Add"})]})}}]),n}(s.Component),E=(Object(a.b)(void 0,(function(e){return{onClick:function(t){e(b())}}}))(A),function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.todo,i=e.complete,s=e.onClick;return Object(c.jsx)("li",{id:t,onClick:function(){return s({id:t,complete:!i})},className:i?"completed":"",children:n})}}]),n}(s.Component)),P=function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.todos,n=e.onClick;return Object(c.jsx)("ul",{children:t.map((function(e){return Object(c.jsx)(E,Object(h.a)({onClick:n},e),e.id)}))})}}]),n}(s.Component),S=(Object(a.b)((function(e){return{todos:e.todos}}),(function(e){return{onClick:function(t){e(f(t))}}}))(P),s.Component,function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(e){return Object(C.a)(this,n),t.call(this,e)}return Object(M.a)(n,[{key:"renderMessage",value:function(e){var t=0;if(e.includes("\n")){var n=[];return e.split("\n").map((function(e){n.push(Object(c.jsxs)("span",{children:[e,Object(c.jsx)("br",{})]},t++))})),Object(c.jsx)("span",{className:"message",children:n},t++)}return Object(c.jsx)("span",{className:"message",children:e},t++)}},{key:"renderMessageGroup",value:function(e){for(var t=this.props.time.split(" ")[1],n=this.props.isMine?"my-chat":"your-chat",i=this.props.isMine?"right":"left",s=[],r=0;r<e.length;++r)s.push(Object(c.jsx)("p",{})),r===e.length-1&&this.props.isMine&&s.push(Object(c.jsx)("div",{className:"cell timestamp",children:t},"timestamp")),s.push(Object(c.jsx)("div",{className:"balloon "+n+(r>0?" child":""),children:Object(c.jsx)("div",{className:"text-message "+i,children:this.renderMessage(e[r])})},r));return this.props.isMine||s.push(Object(c.jsx)("div",{className:"cell timestamp",children:t},"timestamp")),s}},{key:"renderProfile",value:function(){return Object(c.jsx)("div",{className:"cell pic",children:Object(c.jsx)("img",{src:this.props.img})})}},{key:"render",value:function(){var e=this.props.isMine?"right":"left";return Object(c.jsxs)("div",{id:"dv-chat-message",children:[Object(c.jsx)("div",{className:"float-"+e,children:Object(c.jsxs)("div",{className:"desc "+e,children:[this.props.isMine?null:this.renderProfile(),Object(c.jsxs)("div",{className:"cell message-"+e,children:[Object(c.jsx)("div",{className:"name",children:this.props.isMine?"":this.props.name}),this.renderMessageGroup(this.props.text)]})]})}),Object(c.jsx)("p",{children:"\xa0"})]})}}]),n}(s.Component));S.defaultProps={isMine:!1,text:[""],name:"\uc791\uc131\uc790",time:"\uc624\uc804 00:00",img:"https://lh3.googleusercontent.com/proxy/A-2dhRZZaeZ0IWMPOlybAu7tR5UAtOaX3EpcWHJ5iMxQAmSwFWM6JOieS-om-Xr2zDK2soGyseTVRoKdAm8Y4g7bHS1GWo-7j9btj2yB5TCPNuBfzpnU_PEKcen09-Nhnn3XuC6EQqikgPbYtqUxlaAq0Uc"};var D=S,J=(n(61),n(62),function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(C.a)(this,n),(i=t.call(this,e)).inputName=null,i.inputText=null,i.state={},i}return Object(M.a)(n,[{key:"onClickJoin",value:function(){if(this.inputName.value){var e={isMine:!0,text:this.inputText.value,name:this.inputName.value,img:"https://lh3.googleusercontent.com/proxy/A-2dhRZZaeZ0IWMPOlybAu7tR5UAtOaX3EpcWHJ5iMxQAmSwFWM6JOieS-om-Xr2zDK2soGyseTVRoKdAm8Y4g7bHS1GWo-7j9btj2yB5TCPNuBfzpnU_PEKcen09-Nhnn3XuC6EQqikgPbYtqUxlaAq0Uc",time:"2020-12-21 12:28"};this.props.onClickJoin(e)}else;}},{key:"onClickSend",value:function(){if(console.log(this.inputName.value),console.log(this.inputText.value),this.inputName.value)if(this.inputText.value){var e={isMine:!0,text:this.inputText.value,name:this.inputName.value,img:"https://lh3.googleusercontent.com/proxy/A-2dhRZZaeZ0IWMPOlybAu7tR5UAtOaX3EpcWHJ5iMxQAmSwFWM6JOieS-om-Xr2zDK2soGyseTVRoKdAm8Y4g7bHS1GWo-7j9btj2yB5TCPNuBfzpnU_PEKcen09-Nhnn3XuC6EQqikgPbYtqUxlaAq0Uc",time:"2020-12-21 12:28"};this.props.onClickSend(e)}else;else;}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{id:"dv-chat-input",children:[Object(c.jsxs)("label",{children:["\uc774\ub984:",Object(c.jsx)("input",{ref:function(t){e.inputName=t}})]}),Object(c.jsx)("button",{onClickJoin:function(){e.onClickJoin()},children:"\uc785\uc7a5"}),Object(c.jsxs)("div",{className:"input-text",children:[Object(c.jsx)("textarea",{ref:function(t){e.inputText=t}}),Object(c.jsx)("button",{onClickSend:function(){e.onClickSend()},children:"\uc804\uc1a1"})]})]})}}]),n}(s.Component)),U=n(49),W=n.n(U).a.connect("http://localhost:5000/"),w=[],_=function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(C.a)(this,n),(i=t.call(this,e)).state={data:[]},i}return Object(M.a)(n,[{key:"join",value:function(){W.emit("login_user",{},(function(e){"complete"===e.result&&console.log(e.data)}))}},{key:"componentDidMount",value:function(){this.convert(),W.emit("login",{name:"\uc0c1\ud638",userid:"sangho@gmail.com",room:"public"})}},{key:"sendMessage",value:function(e){w.push(e);var t=[],n=(t=this.state.data).length-1;n>=0&&t[n].name===e.name&&t[n].time===e.time?t[n].text.push(e.text):(t.push(e),t[++n].text=[e.text]),this.setState({data:t})}},{key:"convert",value:function(){var e=[],t=-1;w.forEach((function(n){t>=0&&e[t].name===n.name&&e[t].time===n.time?e[t].text.push(n.text):(e.push(n),e[++t].text=[n.text])})),JSON.stringify(this.state.data)!==JSON.stringify(e)&&this.setState({data:e})}},{key:"renderText",value:function(){var e=0,t=[];return this.state.data.forEach((function(n){t.push(Object(c.jsx)(D,{isMine:n.isMine,text:n.text,name:n.name,img:n.img,time:n.time},e++))})),t}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{id:"dv-chat",children:[Object(c.jsx)("div",{id:"dv-chat-body",children:this.renderText()}),Object(c.jsx)(J,{onClickJoin:function(t){e.joinChannel(t)},onClickSend:function(t){e.sendMessage(t)}})]})}}]),n}(s.Component),q=function(e){Object(N.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{children:Object(c.jsx)(_,{})})}}]),n}(s.Component),K=(n(93),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r.d)(Object(r.a)(o.a),window.devToolsExtension?window.devToolsExtension():function(e){return e});return Object(r.e)(e,t,n)}(k,{todos:[]})),R=function(){l.a.render(Object(c.jsx)(a.a,{store:K,children:Object(c.jsx)(q,{})}),document.getElementById("root"))};K.subscribe(R),R()}},[[94,1,2]]]);
//# sourceMappingURL=main.36911f8a.chunk.js.map